---
import Layout from '../layouts/Layout.astro';
import { CompanyList } from '../components/CompanyList';
import { Pagination } from '../components/Pagination';
import type { ApiResponse } from '../types';

const response = await fetch('http://127.0.0.1:8000/companies/?page=1&size=9');
const data: ApiResponse = await response.json();

const { items, total, page, size, pages } = data;
---

<Layout title="Company Directory">
  <main class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold mb-6 text-blue-600">All Companies</h1>
    <CompanyList companies={items} client:load />
    <Pagination currentPage={page} totalPages={pages} />
  </main>
</Layout>

